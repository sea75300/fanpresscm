if(fpcm===void 0)var fpcm={};fpcm.installer={currentDbFileIndex:0,init:function(){fpcm.installer.initDatabase(1,0),jQuery("button.fpcm-installer-next-4").hide()},checkDBData:function(){return sfields=jQuery(".fpcm-installer-data"),sParams={},jQuery.each(sfields,function(e,t){var n=jQuery(t).val(),s=jQuery(t).attr("id").replace("database","");sParams[s]=n}),fpcm.ajax.post("installer/checkdb",{data:{dbdata:sParams},async:!1,execDone:function(e){return e==="1"||e===1?(jQuery("#fpcm-ui-form").submit(),!0):(fpcm.ui.addMessage({txt:fpcm.ui.translate("INSTALLER_DBCONNECTION_FAILEDMSG"),type:"error",id:"errordbtestfailed"}),!1)}}),!1},initDatabase:function(e,t){if(!fpcm.vars.jsvars.sqlFilesCount)return!1;fpcm.ui.progressbar("dbtables",{max:fpcm.vars.jsvars.sqlFilesCount,value:t}),fpcm.dom.fromClass("fpcm-ui-progressbar-label").text(fpcm.ui.translate("INSTALLER_CREATETABLES_HEAD")),fpcm.ajax.post("installer/initdb",{quiet:!0,data:{next:e,current:t},execDone:function(e){if(e.data.msg)return fpcm.ui.addMessage(e.data.msg),!1;if(e.data.html)for(var t in e.data.html){let n=e.data.html[t];fpcm.dom.appendHtml("#fpcm-installer-execlist",'<li class="list-group-item" id="installer-tabs-'+n.tab+'">'+fpcm.ui.getIcon(n.icon,{class:n.class})+fpcm.ui.translate("INSTALLER_CREATETABLES_STEP").replace("{{tablename}}",n.tab)+"</li>")}return fpcm.ui.progressbar("dbtables",{max:fpcm.vars.jsvars.sqlFilesCount,value:e.current}),e.current>=fpcm.vars.jsvars.sqlFilesCount&&!e.next?(fpcm.dom.fromClass("fpcm-ui-progressbar-label").hide(),fpcm.dom.fromTag("button.fpcm-installer-next-4").show(),!0):(fpcm.installer.initDatabase(e.next,e.current),!0)}})}}