if(fpcm===void 0)var fpcm={};fpcm.modulelist={_placeholder:"",init:function(){fpcm.system.checkForUpdates(),fpcm.ui_tabs.render("#modulemgr",{initDataViewOnRenderAfter:fpcm.modulelist.initButtons})},initButtons:function(){fpcm.dom.bindClick("a.fpcm-ui-modulelist-action-local-update",function(e){var t=e.delegateTarget.href;return fpcm.ui_dialogs.confirm({clickNoDefault:!0,clickYes:function(){return fpcm.ui.relocate(t),!1}}),!1}),fpcm.dom.bindClick("button.fpcm-ui-modulelist-action-local",function(e){var t=e.delegateTarget,n={action:t.dataset.action,key:t.dataset.key},s=t.dataset.dir;s&&(n.fromDir=s),fpcm.ui_dialogs.confirm({clickYes:function(){fpcm.ajax.post("modules/exec",{data:n,execDone:function(e){if(e.code!==void 0&&e.code<1){var t="";switch(e.code){case fpcm.vars.jsvars.codes.installFailed:t="MODULES_FAILED_INSTALL";break;case fpcm.vars.jsvars.codes.uninstallFailed:t="MODULES_FAILED_UNINSTALL";break;case fpcm.vars.jsvars.codes.enabledFailed:t="MODULES_FAILED_ENABLE";break;case fpcm.vars.jsvars.codes.disabledFailed:t="MODULES_FAILED_DISABLE";break}fpcm.ui.addMessage({txt:t,type:"error"},!0)}fpcm.ui_tabs.getNodes("#modulemgr",0),fpcm.ui_tabs.show("#modulemgr",0)}})}})});var e=document.getElementById("offcanvasInfo");e.addEventListener("shown.bs.offcanvas",function(e){fpcm.modulelist._placeholder?e.target.getElementsByClassName("offcanvas-body")[0].innerHTML=fpcm.modulelist._placeholder:fpcm.modulelist._placeholder=e.target.getElementsByClassName("offcanvas-body")[0].innerHTML,fpcm.ajax.get("modules/info",{quiet:!0,data:{key:e.relatedTarget.dataset.key,repo:e.relatedTarget.dataset.repo?e.relatedTarget.dataset.repo:0},execDone:function(t){e.target.getElementsByClassName("offcanvas-body")[0].innerHTML=t,fpcm.dom.bindClick("#btnInstall",function(e,t){let n=fpcm.dom.fromId("install"+t.dataset.hash);if(!n.length)return!1;parent.fpcm.ui.relocate(n.attr("href"))})}})}),e.addEventListener("hide.bs.offcanvas",function(e){e.target.getElementsByClassName("offcanvas-body")[0].innerHTML=""})}},fpcm.filemanager={runFileIndexUpdate:function(e){if(!e.files||!e.files[0]||!e.files[0].name)return!1;if(e.result.files[0].error)return!1;fpcm.ajax.post("packagemgr/unzcp",{data:{file:e.files[0].name},loaderMsg:fpcm.ui.translate("MODULES_LIST_INSTALL"),execDone:function(e){if(fpcm.ui.addMessage(e),e.type!=="notice")return!1;fpcm.ui_tabs.show("#modulemgr",0)}})},getAcceptTypes:function(){return/(\.|\/)(zip)$/i}}