if(fpcm===void 0)var fpcm={};fpcm.ajax={exec:function(e,t){t||(t={}),t.method||(t.method="POST"),t.async===void 0&&(t.async=!0),t.data||(t.data=[]),t.execDone||(t.execDone=!1),t.execFail||(t.execFail=!1),t.pageToken&&(t.data._token=fpcm.vars.jsvars.pageTokens[t.pageToken]?fpcm.vars.jsvars.pageTokens[t.pageToken]:null),t.quiet||fpcm.ui_loader.show(t.loaderMsg?t.loaderMsg:null),jQuery.ajax({url:fpcm.vars.ajaxActionPath+e.replace(fpcm.vars.ajaxActionPath,""),type:t.method.toUpperCase(),data:t.data,async:t.async,dataType:t.dataType?t.dataType:null,cache:t.cache===void 0||t.cache,processData:t.processData===void 0||t.processData,contentType:t.contentType!==void 0?t.contentType:"application/x-www-form-urlencoded; charset=UTF-8",statusCode:{500:function(){fpcm.ajax.showAjaxErrorMessage(),fpcm.ui_loader.hide()},503:function(){fpcm.ui.addMessage({txt:"Connection to database failed!",type:"error"},!0),fpcm.ui_loader.hide()},400:function(){fpcm.ui.addMessage({txt:"CSRF_INVALID",type:"error"}),fpcm.ui_loader.hide()},401:function(){fpcm.system.showSessionCheckDialog(),fpcm.ui_loader.hide()},404:function(){fpcm.ajax.showAjaxErrorMessage(),fpcm.ui_loader.hide()}}}).done(function(e){if(e.search&&e.search("FATAL ERROR:")===3&&(console.error(fpcm.ui.translate("AJAX_RESPONSE_ERROR")),console.error("ERROR MESSAGE: "+errorThrown),fpcm.ui_loader.hide()),e.cmd!==void 0)return eval(e.cmd),!0;typeof t.execDone=="string"&&eval(t.execDone),typeof t.execDone=="function"&&t.execDone(e),t.quiet||fpcm.ui_loader.hide()}).fail(function(e,n,s){n=="parsererror"&&(fpcm.ajax.showAjaxErrorMessage(),fpcm.ui_loader.hide()),console.error(fpcm.ui.translate("AJAX_RESPONSE_ERROR")),console.error("STATUS MESSAGE: "+n),console.error("ERROR MESSAGE: "+s),fpcm.ui_loader.hide(),typeof t.execFail=="string"&&eval(t.execFail),typeof t.execFail=="function"&&t.execFail()})},get:function(e,t){t||(t={}),t.method="GET",fpcm.ajax.exec(e,t)},post:function(e,t){t||(t={}),t.method="POST",fpcm.ajax.exec(e,t)},fromJSON:function(e){return e instanceof Object||e instanceof Array?e:JSON.parse(e)},toJSON:function(e){var t=e instanceof Array,n=e instanceof Object;return!t&&!n?"":JSON.stringify(e)},showAjaxErrorMessage:function(){fpcm.ui.addMessage({txt:"AJAX_RESPONSE_ERROR",type:"error"},!0)},execFunction:function(e,t,n){n.data.fn=t,n.dataType="json",fpcm.ajax.post(e,n)},getItemList:function(e){if(!e.module)return console.error("Invalid module given."),!1;e.dataType||(e.dataType="json");let t={mode:e.mode?e.mode:null,page:e.page!==void 0?parseInt(e.page):1};e.filter instanceof Object&&(t.filter=e.filter),fpcm.ajax.post(e.module+"/lists",{data:t,quiet:!(t.filter!==void 0&&t.filter!==null||e.loader),execDone:function(t){return!!t&&(e.dataType!=="json"?(fpcm.dom.assignHtml(e.destination,t),e.onAssignHtmlAfter(t),!0):t.html?(fpcm.ui.togglePager(!!e.filter),fpcm.dom.assignHtml(e.destination,t.html),e.onAssignHtmlAfter(t),!0):t.message&&t.message.txt&&t.message.type?(fpcm.ui.addMessage(t.message),!1):(fpcm.vars.jsvars.dataviews[t.dataViewName]=t.dataViewVars,fpcm.dataview.updateAndRender(t.dataViewName,{onRenderAfter:e.onRenderDataViewAfter}),e.filter?fpcm.ui.togglePager(!0):t.pager&&!e.filter&&(fpcm.ui.togglePager(!1),fpcm.vars.jsvars.pager.currentPage=t.pager.currentPage,fpcm.vars.jsvars.pager.maxPages=t.pager.maxPages,fpcm.vars.jsvars.pager.showBackButton=t.pager.showBackButton,fpcm.vars.jsvars.pager.showNextButton=t.pager.showNextButton,fpcm.ui.initPager({nextAction:function(t,n){return!(!fpcm.vars.jsvars.pager.showNextButton||fpcm.vars.jsvars.pager.currentPage>=fpcm.vars.jsvars.pager.maxPages)&&(e.onPagerNext(t,n),!0)},backAction:function(t,n){return!!fpcm.vars.jsvars.pager.showBackButton&&(e.onPagerBack(t,n),!0)},selectAction:function(t,n){return n.item.value!=fpcm.vars.jsvars.pager.currentPage&&(e.onPagerSelect(t,n),!0)}})),!0))}})}}