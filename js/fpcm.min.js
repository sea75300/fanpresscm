if(fpcm===void 0)var fpcm={vars:{jsvars:{},ui:{messages:[]}},modules:{},system:{mergeToVars:function(e){return e||(e=[]),jQuery.extend(!0,fpcm,e)}}};window.onload=function(){typeof jQuery!="undefined"?(jQuery.noConflict(),fpcm.pub={init:function(){fpcm.pub.doRefresh(),jQuery(".fpcm-pub-commentsmiley").click(function(){return fpcm.pub.insert(" "+this.dataset.code+" "),!1}),jQuery(".fpcm-pub-readmore-text").hide(),jQuery(".fpcm-pub-readmore-link").click(function(){return jQuery("#fpcm-pub-readmore-text-"+this.id).fadeToggle(),!1}),jQuery(".fpcm-pub-mentionlink").click(function(){return fpcm.pub.insert("@#"+this.id+": "),!1}),fpcm.pub.shares||(fpcm.pub.shares={}),jQuery("a.fpcm-pub-sharebutton-count").click(function(){var e=jQuery(this).attr("data-onclick");return!(fpcm.pub.shares[e]&&(new Date).getTime()-fpcm.pub.shares[e]<3e4)&&(fpcm.pub.shares[e]||(fpcm.pub.shares[e]=0),fpcm.pub.shares[e]=(new Date).getTime(),fpcm.pub.doAjax({action:"shareClick",type:"POST",data:{oid:jQuery(this).attr("data-oid"),item:e},execDone:function(){return e!=="likebutton"||(fpcm.pub.addMessage({type:"notice",id:(new Date).getTime(),txt:fpcm.vars.ui.lang.PUBLIC_SHARE_LIKE}),!1)}}),e!=="likebutton")}),fpcm.pub.showMessages()},insert:function(e){aTag=e,eTag="";var n,s,o,i,a,r,t=jQuery("#newcommenttext")[0];if(t.focus(),typeof document.selection!="undefined")o=document.selection.createRange(),s=o.text,o.text=aTag+s+eTag,o=document.selection.createRange(),s.length==0?o.move("character",-eTag.length):o.moveStart("character",aTag.length+s.length+eTag.length),o.select();else if(typeof t.selectionStart!="undefined")i=t.selectionStart,a=t.selectionEnd,s=t.value.substring(i,a),t.value=t.value.substr(0,i)+aTag+s+eTag+t.value.substr(a),s.length==0?n=i+aTag.length:n=i+aTag.length+s.length+eTag.length,t.selectionStart=n,t.selectionEnd=n;else{for(r=new RegExp("^[0-9]{0,3}$");!r.test(n);)n=prompt("EinfÃ¼gen an Position (0.."+t.value.length+"):","0");n>t.value.length&&(n=t.value.length),t.value=t.value.substr(0,n)+aTag+s+eTag+t.value.substr(n)}},addMessage:function(e){if(!jQuery("#fpcm-messages").length)return alert(e.txt),!0;jQuery("#fpcm-messages").append('<div class="fpcm-pub-message-box fpcm-pub-message-'+e.type+'" id="msgbox-'+e.id+'"><div class="fpcm-pub-message-box-text">'+e.txt+"</div></div>")},showMessages:function(){if(!fpcm.vars.ui||!fpcm.vars.ui.messages||!fpcm.vars.ui.messages.length)return!1;for(var t=null,e=0;e<fpcm.vars.ui.messages.length;e++)fpcm.pub.addMessage(fpcm.vars.ui.messages[e]);return!0},doRefresh:function(){return!!fpcm.vars.ajaxActionPath&&(fpcm.pub.doAjax({action:"refresh",data:{t:1}}),!0)},doAjax:function(e){if(!fpcm.vars.ajaxActionPath&&!e.ajaxActionPath)return console.error("Unable to execute AJAX request due to missing request destination!"),console.error(e),!1;var t={url:(e.ajaxActionPath?e.ajaxActionPath:fpcm.vars.ajaxActionPath)+e.action,async:e.async===void 0||e.async,type:e.method?e.method.toUpperCase():"GET"};e.data&&(t.data=e.data),e.dataType&&(t.dataType=e.dataType),e.onCode&&(t.statusCode=e.onCode),jQuery.ajax(t).done(function(t){if(t.search&&t.search("FATAL ERROR:")===3&&console.error("ERROR MESSAGE: "+errorThrown),typeof e.execDone!="function")return!0;e.execDone(t)}).fail(function(t,n,s){if(console.error("STATUS MESSAGE: "+n),console.error("ERROR MESSAGE: "+s),typeof e.execFail!="function")return!0;e.execFail()})}},fpcm.pub.init(),fpcm.modules&&jQuery.each(fpcm.modules,function(e,t){if(!t.init||typeof t.init!="function")return!0;t.init()})):console.error("jQuery is no loaded! Check if you included the libary in your page header or enable inclusion in FanPress CM ACP.")}