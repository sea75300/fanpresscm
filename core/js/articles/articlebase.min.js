if(fpcm===void 0)var fpcm={};fpcm.article={init:function(){fpcm.ui_tabs.render("#tabs-editor",{initDataViewOnRenderAfter:function(){fpcm.article._initCommentActions()}})},initAfter:function(){fpcm.article._initAll(),fpcm.article._initEdit(),fpcm.dom.bindEvent(".fpcm-ui-editor-metainfo-checkbox","change",function(e,t){fpcm.dom.fromTag("span.fpcm-ui-editor-metainfo-"+t.dataset.icon).toggleClass("text-info text-secondary")}),window.categoryMs=fpcm.ui.multiselect("articlecategories"),fpcm.dom.bindClick("#btnEditsources",function(){fpcm.ajax.post("autocomplete",{data:{term:"",src:"articlesources"},execDone:function(e){fpcm.editor.manageSources(e)}})})},_initCommentActions:function(){if(!fpcm.comments)return!0;fpcm.comments.assignActionsList(),fpcm.dom.bindClick(".fpcm-ui-commentlist-link",function(e,t){fpcm.article._initCommentDialog(t.href)})},_initAll:function(){fpcm.ui.autocomplete("#articlesources",{source:fpcm.vars.ajaxActionPath+"autocomplete&src=articlesources",minLength:3}),fpcm.ui.autocomplete("#fpcm-id-articles-relates-to",{source:fpcm.vars.ajaxActionPath+"autocomplete&src=articles",minLength:3}),fpcm.dom.bindClick("#insertarticleimg",function(){fpcm.editor.showFileManager(3)}),fpcm.editor.tweetTextInput=fpcm.dom.fromId("articletweettxt"),fpcm.dom.bindClick("#twitterReplacements li > a.dropdown-item",function(e,t){if(!t.dataset.var)return!1;let n=fpcm.editor.tweetTextInput.val(),s=fpcm.dom.fromTag(fpcm.editor.tweetTextInput).prop("selectionStart");fpcm.editor.tweetTextInput.val(n.substring(0,s)+t.dataset.var+n.substring(s))})},_initEdit:function(){if(!fpcm.vars.jsvars.articleId)return!0;fpcm.dom.fromId("btnShortlink").click(function(){return fpcm.ajax.get("editor/editorlist",{dataType:"json",data:{id:fpcm.dom.fromTag(this).data().article,view:"shortlink"},execDone:function(e){let t={id:"editor-shortlink",title:fpcm.ui.translate("EDITOR_ARTICLE_SHORTLINK"),closeButton:!0,dlButtons:[{text:"EDITOR_ARTICLE_SHORTLINK_COPY",icon:"copy",click:function(){let e=fpcm.dom.fromId("fpcm-editor-shotlink");if(!e.length)return!0;e.select(),document.execCommand("copy")}}]};t.content='<div class="form-floating mb-3"><input type="url" class="form-control" id="fpcm-editor-shotlink" name="fpcm-editor-shotlink" placeholder="'+fpcm.ui.translate("EDITOR_ARTICLE_SHORTLINK")+'" value="'+e.shortend+'"><label for="fpcm-editor-shotlink">'+fpcm.ui.translate("EDITOR_ARTICLE_SHORTLINK")+"</label></div>",fpcm.ui_dialogs.create(t)}}),!1})},_initCommentDialog:function(e){return fpcm.ui_dialogs.create({id:"editor-comments",title:"COMMENTS_EDIT",url:e,closeButton:!0,icon:{icon:"comment"},dlButtons:[{text:"COMMMENT_LOCKIP",icon:"lock",disabled:!fpcm.vars.jsvars.lkIp,click:function(e){fpcm.dom.findElementInDialogFrame(e,"#btnLockIp").click()}},{text:"Whois",icon:"globe",click:function(e){let t=fpcm.dom.findElementInDialogFrame(e,"#whoisIp");window.open(t[0].href,"_blank","width=700,height=500,scrollbars=yes,resizable=yes,")}},{text:"GLOBAL_SAVE",icon:"save",primary:!0,click:function(e){fpcm.dom.findElementInDialogFrame(e,"#btnCommentSave").click(),fpcm.ui_tabs.show("#tabs-editor",2)}}]}),fpcm.ui_loader.hide(),!1}}