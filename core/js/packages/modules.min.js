if(fpcm===void 0)var fpcm={};fpcm.pkgManager._rootEL=null,_messageDiv=null,fpcm.pkgManager._currentKeyIndex=0,fpcm.pkgManager.initBefore=function(){return!fpcm.vars.jsvars.pkgdata.pkgKey==="all"},fpcm.pkgManager.beforeExecRequest=function(){if(fpcm.pkgManager._rootEL)return;let l="fpcm-progress-package";if(fpcm.vars.jsvars.pkgdata.pkgHashes&&fpcm.vars.jsvars.pkgdata.pkgHashes.length>1){let e=fpcm.vars.jsvars.pkgdata.pkgHashes[fpcm.pkgManager._currentKeyIndex];l+=fpcm.vars.jsvars.pkgdata.pkgHashes[fpcm.pkgManager._currentKeyIndex],fpcm.pkgManager.progressBarLabelId+=e,fpcm.pkgManager.timerDivId+=e,fpcm.pkgManager.messagesDivId+=e}fpcm.pkgManager._rootEL=document.getElementById("fpcm-id-prozess-list");let t=document.createElement("div");t.classList.add("list-group","list-group-horizontal-md","shadow","row-cols-md-3");let f=new fpcm.ui.forms.icon("plus-circle"),c=document.createElement("div");c.classList.add("list-group-item","py-3","list-group-item-light"),c.innerHTML=`${f.getString()} ${fpcm.ui.translate("FILE_LIST_FILENAME")}: ${fpcm.vars.jsvars.pkgdata.pkgname}`;let m=new fpcm.ui.forms.icon("weight"),i=document.createElement("div");i.classList.add("list-group-item","py-3","list-group-item-light"),i.innerHTML=`${m.getString()} ${fpcm.ui.translate("FILE_LIST_FILESIZE")}: ${fpcm.vars.jsvars.pkgdata.pkgsize}`;let h=new fpcm.ui.forms.icon("clock fa-far"),n=document.createElement("div");n.classList.add("list-group-item","py-3","list-group-item-light"),n.innerHTML=`${h.getString()} ${fpcm.ui.translate("PACKAGEMANAGER_TIMER")} `;let a=document.createElement("span");a.classList.add("spinner-border","spinner-border-sm","text-secondary"),a.setAttribute("role","status");let o=document.createElement("span");o.id=fpcm.pkgManager.timerDivId,o.appendChild(a),n.appendChild(o),t.appendChild(c),t.appendChild(i),t.appendChild(n);let r=document.createElement("div");r.classList.add("my-3");let e=document.createElement("div");e.id=l,e.classList.add("progress","fpcm","ui-progressbar-lg","position-relative","shadow"),e.setAttribute("role","progressbar"),e.setAttribute("aria-label",fpcm.ui.translate("MODULES_LIST_INSTALL")),e.setAttribute("aria-valuenow",1),e.setAttribute("aria-valuemin",1),e.setAttribute("aria-valuemax",fpcm.vars.jsvars.pkgdata.steps.length);let d=document.createElement("div");d.classList.add("progress-bar","overflow-visible","text-start");let s=document.createElement("div");s.id=fpcm.pkgManager.progressBarLabelId,s.classList.add("position-absolute","top-50","start-50","translate-middle","p-1","rounded"),fpcm.ui.darkModeEnabled()||s.classList.add("bg-light","bg-opacity-75<"),e.appendChild(d),e.appendChild(s),r.appendChild(e);let u=document.createElement("div");u.id=fpcm.pkgManager.messagesDivId,fpcm.pkgManager._rootEL.appendChild(t),fpcm.pkgManager._rootEL.appendChild(r),fpcm.pkgManager._rootEL.appendChild(u),fpcm.pkgManager._currentKeyIndex++},fpcm.pkgManager.execModulerequest=function(){return fpcm.ajax.post("packagemgr/moduleInstaller",{quiet:!0,data:{step:fpcm.pkgManager.currentEl.step,key:fpcm.vars.jsvars.pkgdata.pkgKey,mode:fpcm.vars.jsvars.action},execDone:function(e){if(!e.code)return e.message?(fpcm.pkgManager.showMessage("danger",fpcm.pkgManager.currentEl.icon+fpcm.pkgManager.currentEl.label,e.message.icon+e.message.txt),fpcm.ui_notify.show({body:e.message.txt}),document.getElementById("protobtn").classList.replace("btn-light","btn-primary")):fpcm.pkgManager.errorMsg(),fpcm.pkgManager.assignTimerStopTime("danger"),fpcm.pkgManager.currentEl={},!1;e.pkgdata instanceof Object&&jQuery.extend(fpcm.vars.jsvars.pkgdata,e.pkgdata);var t=fpcm.pkgManager.currentEl.after;if(t&&typeof fpcm.pkgManager[t]=="function"&&fpcm.pkgManager[t].call(),!fpcm.vars.jsvars.pkgdata.steps[fpcm.pkgManager.currentIdx])return!1;fpcm.pkgManager.execRequest(fpcm.vars.jsvars.pkgdata.steps[fpcm.pkgManager.currentIdx])},execFail:function(){return fpcm.ui_notify.show({body:fpcm.pkgManager.errorMsg()}),fpcm.pkgManager.currentEl={},!1}}),!0},fpcm.pkgManager.stopTimerMessage=function(){let e=new fpcm.ui.forms.icon("circle-check","lg");fpcm.pkgManager.showMessage("success",'<span class="me-2">'+e.getString()+"</span> "+fpcm.vars.jsvars.pkgdata.pkgname,fpcm.ui.translate("PACKAGEMANAGER_SUCCESS")),fpcm.ui_notify.show({body:fpcm.ui.translate("PACKAGEMANAGER_SUCCESS")+" "+fpcm.vars.jsvars.pkgdata.pkgname})}