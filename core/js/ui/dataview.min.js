/*
 (c) 2015-2018, Stefan Seehafer
 @license http://www.gnu.org/licenses/gpl.txt GPLv3
 @since FPCM 3.5
*/
if(void 0===fpcm)var fpcm={};
fpcm.dataview={render:function(a,b){b||(b={});if(fpcm.vars.jsvars.dataviews){if(!fpcm.dataview.exists(a))return console.log("Dataview "+a+" does not exists in fpcm.vars.jsvars.dataviews!"),!1;if(!fpcm.vars.jsvars.dataviews[a].init)return!1;if(!fpcm.vars.jsvars.dataviews[a].columns.length)return console.log("Dataview "+a+" does not contain any columns!"),!1;var d=fpcm.dom.fromId("fpcm-dataview-"+a+"-spinner"),c=fpcm.vars.jsvars.dataviews[a],e="";c.fullId=fpcm.dataview.getFullId(a);c.headId=c.fullId+
"-head";c.rowsId=c.fullId+"-rows";c.wrapper=fpcm.dom.fromId(c.fullId).addClass("fpcm-ui-dataview");c.wrapper.append('<div class="row fpcm-ui-dataview-head fpcm-ui-dataview-rowcolpadding ui-widget-header ui-corner-all ui-helper-reset" id="'+c.headId+'"></div>');c.wrapper.append('<div class="fpcm-ui-dataview-rows" id="'+c.rowsId+'"></div>');c.headline=fpcm.dom.fromId(c.headId);c.lines=fpcm.dom.fromId(c.rowsId);jQuery.each(c.columns,function(a,b){e="fpcm-ui-padding-none-lr fpcm-ui-dataview-col "+b.class+
" fpcm-ui-dataview-align-"+b.align+" col align-self-center "+fpcm.dataview.getSizeString(b);c.headline.append('<div class="'+e+'" id="'+c.fullId+"-dataview-headcol-"+b.name+a+'">'+(b.descr?fpcm.ui.translate(b.descr):"&nbsp;")+"</div>")});c.headline.append('<div class="fpcm-ui-clear"></div>');jQuery.each(c.rows,function(a,b){fpcm.dataview.addRow(c.fullId,a,b,c)});"function"===typeof b.onRenderAfter&&b.onRenderAfter.call();fpcm.vars.jsvars.dataviews[a].dataViewHeight=fpcm.dom.fromId(c.fullId).height()+
"px";d&&d.remove()}},addRow:function(a,b,d,c){if(fpcm.vars.jsvars.dataviews){var e=a+"-dataview-row-"+b;a=d.isheadline?"fpcm-ui-dataview-subhead":"fpcm-ui-dataview-row fpcm-ui-background-transition";a+=d.isNotFound?" fpcm-ui-dataview-notfound":"";var f=d.isNotFound;d.class=a+(d.class?" "+d.class:"");c.lines.append('<div class="row '+d.class+'" id="'+e+'"></span>');jQuery.each(d.columns,function(a,b){var d=c.columns[a]?c.columns[a]:!1;if(d){d.size||(d.size="auto");d="fpcm-ui-padding-none-lr fpcm-ui-dataview-col "+
d.class+" fpcm-ui-dataview-align-"+d.align+(f?" col col-12":fpcm.dataview.getSizeString(d))+" fpcm-ui-dataview-type"+b.type+" align-self-center"+(b.class?" "+b.class:"");var g=b.type==fpcm.vars.jsvars.dataviews.rolColTypes.coltypeValue?'<div class="fpcm-ui-dataview-col-value">'+(""!==b.value?fpcm.ui.translate(b.value):"&nbsp;")+"</div>":""!==b.value?fpcm.ui.translate(b.value):"&nbsp;";fpcm.dom.appendHtml("#"+e,'<div class="'+d+'" id="'+e+"-dataview-rowcol-"+b.name+a+'">'+g+"</div>")}})}},updateAndRender:function(a,
b){fpcm.vars.jsvars.dataviews&&fpcm.dataview.exists(a)&&(fpcm.dom.fromId(fpcm.dataview.getFullId(a)).empty(),fpcm.dataview.render(a,b))},getDataViewWrapper:function(a,b){b||(b="fpcm-ui-dataview-wrapper");return'<div id="'+fpcm.dataview.getFullId(a)+'" class="'+b+'"></div>'},getFullId:function(a){return"fpcm-dataview-"+a},getSizeString:function(a){return a.size?" fpcm-ui-dataview-size-"+a.size+" col-12 col-lg-"+a.size:"col"},exists:function(a){return fpcm.vars.jsvars.dataviews[a]?!0:!1}};