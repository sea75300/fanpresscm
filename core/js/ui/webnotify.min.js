/*
 (c) 2015-2018, Stefan Seehafer
 @license http://www.gnu.org/licenses/gpl.txt GPLv3
*/
if(void 0===fpcm)var fpcm={};
fpcm.ui_notify={_supported:!0,_currentPermission:null,init:function(){void 0===Notification&&(console.error("WebNotifications is not supported or provided by the current browser."),fpcm.ui_notify._supported=!1)},show:function(a){if(!fpcm.ui_notify._supported)return alert(a.body),!1;a.noRequest||fpcm.ui_notify._requestPermissions(a);if(!0!==fpcm.ui_notify._currentPermission)return!1;var b={body:fpcm.ui.translate(a.body)};b.icon=a.icon?a.icon:fpcm.vars.ui.notifyicon;a.tag&&(b.tag=a.tag);b.lang=a.lang?
a.lang:fpcm.dom.fromTag("html").attr("lang");a.title||(a.title="HEADLINE");b=new Notification(fpcm.ui.translate(a.title),b);a.click&&(b.onclick=a.click);a.error&&(b.onerror=a.error);if(-1===a.timeout)return!0;setTimeout(b.close.bind(b),a.timeout?a.timeout:4E3);return!0},_requestPermissions:function(a){if(null!==fpcm.ui_notify._hasPermissions())return!0;Notification.requestPermission().then(function(b){if(!fpcm.ui_notify._hasPermissions(b))return!1;a&&(a.noRequest=!0,fpcm.ui_notify.show(a));return!0});
return fpcm.ui_notify._currentPermission},_hasPermissions:function(a){a||(a=Notification.permission);return"granted"===a?fpcm.ui_notify._currentPermission=!0:"denied"===a?fpcm.ui_notify._currentPermission=!1:null}};