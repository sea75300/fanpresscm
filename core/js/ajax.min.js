if(fpcm===void 0)var fpcm={};fpcm.ajax={exec:function(b,a){a||(a={}),a.method||(a.method='POST'),a.async===void 0&&(a.async=!0),a.data||(a.data=[]),a.execDone||(a.execDone=!1),a.execFail||(a.execFail=!1),a.pageToken&&(a.data._token=fpcm.vars.jsvars.pageTokens[a.pageToken]?fpcm.vars.jsvars.pageTokens[a.pageToken]:null),a.quiet||fpcm.ui_loader.show(a.loaderMsg?a.loaderMsg:null),jQuery.ajax({url:fpcm.vars.ajaxActionPath+b.replace(fpcm.vars.ajaxActionPath,''),type:a.method.toUpperCase(),data:a.data,async:a.async,dataType:a.dataType?a.dataType:null,cache:a.cache===void 0||a.cache,processData:a.processData===void 0||a.processData,contentType:a.contentType!==void 0?a.contentType:'application/x-www-form-urlencoded; charset=UTF-8',statusCode:{500:function(){fpcm.ajax.showAjaxErrorMessage(),fpcm.ui_loader.hide()},400:function(){fpcm.ui.addMessage({txt:'CSRF_INVALID',type:'error'}),fpcm.ui_loader.hide()},401:function(){fpcm.system.showSessionCheckDialog(),fpcm.ui_loader.hide()},404:function(){fpcm.ajax.showAjaxErrorMessage(),fpcm.ui_loader.hide()}}}).done(function(b){if(b.search&&b.search('FATAL ERROR:')===3&&(console.error(fpcm.ui.translate('AJAX_RESPONSE_ERROR')),console.error('ERROR MESSAGE: '+errorThrown),fpcm.ui_loader.hide()),b.cmd!==void 0)return eval(b.cmd),!0;typeof a.execDone=='string'&&eval(a.execDone),typeof a.execDone=='function'&&a.execDone(b),a.quiet||fpcm.ui_loader.hide()}).fail(function(d,b,c){b=='parsererror'&&(fpcm.ajax.showAjaxErrorMessage(),fpcm.ui_loader.hide()),console.error(fpcm.ui.translate('AJAX_RESPONSE_ERROR')),console.error('STATUS MESSAGE: '+b),console.error('ERROR MESSAGE: '+c),fpcm.ui_loader.hide(),typeof a.execFail=='string'&&eval(a.execFail),typeof a.execFail=='function'&&a.execFail()})},get:function(b,a){a||(a={}),a.method='GET',fpcm.ajax.exec(b,a)},post:function(b,a){a||(a={}),a.method='POST',fpcm.ajax.exec(b,a)},fromJSON:function(a){return a instanceof Object||a instanceof Array?a:JSON.parse(a)},toJSON:function(a){var b=a instanceof Array,c=a instanceof Object;return!b&&!c?'':JSON.stringify(a)},showAjaxErrorMessage:function(){fpcm.ui.addMessage({txt:'AJAX_RESPONSE_ERROR',type:'error'},!0)},execFunction:function(b,c,a){a.data.fn=c,a.dataType='json',fpcm.ajax.post(b,a)},getItemList:function(a){if(!a.module)return console.error('Invalid module given.'),!1;a.dataType||(a.dataType='json');let b={mode:a.mode?a.mode:null,page:a.page!==void 0?parseInt(a.page):1};a.filter instanceof Object&&(b.filter=a.filter),fpcm.ajax.post(a.module+'/lists',{data:b,quiet:!(b.filter!==void 0&&b.filter!==null||a.loader),execDone:function(b){return!!b&&(a.dataType!=='json'?(fpcm.dom.assignHtml(a.destination,b),a.onAssignHtmlAfter(),!0):b.message&&b.message.txt&&b.message.type?(fpcm.ui.addMessage(b.message),!1):(fpcm.vars.jsvars.dataviews[b.dataViewName]=b.dataViewVars,fpcm.dataview.updateAndRender(b.dataViewName,{onRenderAfter:a.onRenderDataViewAfter}),a.filter?fpcm.dom.fromId('opensearch').addClass('btn-primary'):b.pager&&!a.filter&&(fpcm.dom.fromId('opensearch').removeClass('btn-primary'),fpcm.vars.jsvars.pager.currentPage=b.pager.currentPage,fpcm.vars.jsvars.pager.maxPages=b.pager.maxPages,fpcm.vars.jsvars.pager.showBackButton=b.pager.showBackButton,fpcm.vars.jsvars.pager.showNextButton=b.pager.showNextButton,fpcm.ui.initPager({nextAction:function(b,c){return!(!fpcm.vars.jsvars.pager.showNextButton||fpcm.vars.jsvars.pager.currentPage>=fpcm.vars.jsvars.pager.maxPages)&&(a.onPagerNext(b,c),!0)},backAction:function(b,c){return!!fpcm.vars.jsvars.pager.showBackButton&&(a.onPagerBack(b,c),!0)},selectAction:function(c,b){return b.item.value!=fpcm.vars.jsvars.pager.currentPage&&(a.onPagerSelect(c,b),!0)}})),!0))}})}}