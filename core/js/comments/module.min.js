if(fpcm===void 0)var fpcm={};fpcm.comments={init:function(){fpcm.ui.langvarExists("ARTICLES_SEARCH")&&fpcm.comments.initCommentSearch(),fpcm.comments.assignActionsList()},initAfter:function(){if(!fpcm.dataview)return!1;if(fpcm.dataview.exists("commenttrash"))return fpcm.dataview.render("commenttrash"),!0;fpcm.dataview.exists("commentlist")&&(fpcm.dataview.render("commentlist"),fpcm.comments.deleteSingleArticle())},assignActionsList:function(){return fpcm.vars.jsvars.activeTab&&(fpcm.vars.jsvars.massEdit={relocateParams:"&rg="+fpcm.vars.jsvars.activeTab}),fpcm.dom.bindClick("#massEdit",function(){return fpcm.system.initMassEditDialog("comments/massedit","comments-massedit",fpcm.comments),!1}),fpcm.comments.deleteSingleArticle(),!0},assignActions:function(){var e=fpcm.dom.fromId("action").val();return fpcm.comments[e]?(fpcm.comments[e](),-1):-1},initWidgets:function(){return fpcm.ui.autocomplete("#moveToArticle",{source:fpcm.vars.ajaxActionPath+"autocomplete&src=articles",minLength:3}),!0},initCommentSearch:function(){fpcm.dom.fromId("opensearch").unbind("click"),fpcm.dom.fromId("opensearch").click(function(){return fpcm.ui_dialogs.create({id:"comments-search",title:"ARTICLES_SEARCH",closeButton:!0,dlButtons:[{text:"ARTICLE_SEARCH_START",icon:"search",primary:!0,clickClose:!0,click:function(){var e={mode:fpcm.vars.jsvars.articleSearchMode,filter:fpcm.dom.getValuesByClass("fpcm-comments-search-input")};e.filter.combinations=fpcm.dom.getValuesByClass("fpcm-ui-input-select-commentsearch-combination"),fpcm.comments.startCommentSearch(e)}},{text:"GLOBAL_RESET",icon:"filter-circle-xmark",clickClose:!0,click:function(){fpcm.ui.relocate("self")}}],dlOnOpenAfter:function(){fpcm.ui.autocomplete("#articleId",{source:fpcm.vars.ajaxActionPath+"autocomplete&src=articles",minLength:3}),fpcm.dom.fromId("text").focus()}}),!1})},startCommentSearch:function(e){if((new Date).getTime()-fpcm.vars.jsvars.commentsLastSearch<1e4)return fpcm.ui.addMessage({type:"error",txt:fpcm.ui.translate("SEARCH_WAITMSG")}),!1;fpcm.ajax.post("comments/search",{data:e,execDone:function(e){e.message&&fpcm.ui.addMessage(e.message),fpcm.ui.mainToolbar.find(".fpcm-ui-pager-element").addClass("fpcm-ui-hidden"),fpcm.vars.jsvars.dataviews[e.dataViewName]=e.dataViewVars,fpcm.dataview.updateAndRender(e.dataViewName)}}),fpcm.vars.jsvars.commentsLastSearch=(new Date).getTime()},emptyTrash:function(){return fpcm.system.emptyTrash({fn:"clearComments"}),!0},deleteSingleArticle:function(){fpcm.dom.bindClick(".fpcm-ui-button-delete-comment-single",function(e,t){fpcm.ui_dialogs.confirm({clickYes:function(){fpcm.ajax.exec("comments/delete",{dataType:"json",pageToken:"comments/delete",data:{id:t.dataset.comid},execDone:function(e){return fpcm.commentCallbacks.deleteCallback(e)}})}})})},deleteMultipleArticle:function(){var e=fpcm.dom.getCheckboxCheckedValues(".fpcm-ui-list-checkbox");return e.length===0?(fpcm.ui_loader.hide(),!1):(fpcm.ui_dialogs.confirm({clickYes:function(){fpcm.ajax.exec("comments/delete",{dataType:"json",pageToken:"comments/delete",data:{id:e,multiple:1},execDone:function(e){return fpcm.commentCallbacks.deleteCallback(e)}})}}),!0)},restoreFromTrash:function(){var e=fpcm.dom.getCheckboxCheckedValues(".fpcm-ui-list-checkbox");return e.length==0?(fpcm.ui_loader.hide(),!1):(fpcm.system.emptyTrash({fn:"restoreComments",ids:e}),!0)},resetActionsMenu:function(){return fpcm.dom.resetValuesByIdsSelect("ids"),!0}}