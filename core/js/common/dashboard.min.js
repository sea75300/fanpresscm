if(fpcm===void 0)var fpcm={};fpcm.dashboard={onDone:{},init:function(){fpcm.dom.bindClick("#btnResetDashboardSettings",fpcm.dashboard.resetPositions),fpcm.dom.bindEvent("#offcanvasInfo","shown.bs.offcanvas",fpcm.dashboard.fetchDisabledContainer),fpcm.dom.bindEvent("#offcanvasInfo","hidden.bs.offcanvas",function(){fpcm.dom.fromTag("#fpcm-ui-container-disabled-list > a[data-container]").empty()}),fpcm.ajax.exec("dashboard/load",{quiet:!0,async:!0,execDone:function(e){return fpcm.dom.assignHtml("#fpcm-dashboard-containers",e),fpcm.ui.initJqUiWidgets(),fpcm.dashboard.forceUpdate(),fpcm.dashboard.initDraggable(),fpcm.system.openUpdateDialog("btnStartUpdate"),jQuery.each(fpcm.dashboard.onDone,function(e,t){if(!t.execAfter||typeof t.execAfter!="function")return!0;t.execAfter()}),!1}})},forceUpdate:function(){return!!fpcm.vars.jsvars.forceUpdate&&(fpcm.ui.relocate(document.getElementById("btnStartUpdate").dataset.update),!0)},initDraggable:function(){7,fpcm.ui_dnd.initDnd({destination:"fpcm-dashboard-containers",handle:".fpcm.dashboard-container-move",dropCallback:function(e){for(var n=e.to.children,s={},t=0;t<n.length;t++){if(!n[t]||!n[t].dataset||!n[t].dataset.cname)continue;s[n[t].dataset.cname]=t+1}fpcm.ajax.post("setconfig",{data:{var:"dashboardpos",value:s},execDone:fpcm.dashboard.init,quiet:!0})}}),fpcm.dom.bindClick(".fpcm.ui-dashboard-container-disable",function(e,t){fpcm.dashboard.disableContainer(t.dataset.cname)})},resetPositions:function(e){return fpcm.ui_dialogs.confirm({clickYes:function(){let t=document.createElement("span");t.classList.add("spinner-border","spinner-border-sm","ms-1"),e.delegateTarget.appendChild(t),fpcm.ajax.post("setconfig",{data:{op:"reset",var:"dashboardpos"},execDone:function(){fpcm.dashboard.init(),e.delegateTarget.removeChild(t)},quiet:!0})}}),!1},fetchDisabledContainer:function(){fpcm.ajax.exec("dashboard/manager",{quiet:!0,async:!0,execDone:function(e){fpcm.dom.fromTag("#fpcm-ui-container-disabled-list > a[data-container]").remove();let s=fpcm.dom.fromId("fpcm-ui-container-disabled-list"),t="";e[0].code!==-1&&(t='<button type="button" class="btn-close"></button>');for(var n in e)s.append(`<a class="list-group-item d-flex justify-content-between align-items-start" data-container="${e[n].code}"><div class="align-self-center">${e[n].hl}</div> ${t}</a>`);fpcm.dom.bindClick("#fpcm-ui-container-disabled-list > a[data-container]",function(e,t){fpcm.dashboard.enableContainer(t)})}})},disableContainer:function(e){return fpcm.ui_dialogs.confirm({clickYes:function(){fpcm.ajax.post("setconfig",{data:{op:"change",var:"dashboard_containers_disabled",value:e},execDone:fpcm.dashboard.init,quiet:!0})}}),!1},enableContainer:function(e){return e.dataset.container!=-1&&(fpcm.ui_dialogs.confirm({clickYes:function(){fpcm.ajax.post("setconfig",{data:{op:"reset",var:"dashboard_containers_disabled",value:e.dataset.container},execDone:function(){fpcm.dashboard.fetchDisabledContainer(),fpcm.dashboard.init()},quiet:!0})}}),!1)}}