if(fpcm===void 0)var fpcm={};fpcm.gsearch={_lightbox:null,init:function(){fpcm.dom.bindEvent("#fpcm-id-search-global-btn","hidden.bs.dropdown",function(){fpcm.dom.fromClass("fpcm.ui-search-global-results").remove(),fpcm.dom.fromId("fpcm-id-search-global-text").val("")}),fpcm.dom.bindEvent("#fpcm-id-search-global-btn","shown.bs.dropdown",function(){fpcm.dom.fromId("fpcm-id-search-global-text").focus()}),fpcm.dom.bindEvent("#fpcm-id-search-global-text","keydown",function(e,t){if(!t.value||t.value.length<3)return!0;fpcm.gsearch.results(t.value)},!1,!0),fpcm.dom.bindClick("#fpcm-id-search-global-start",function(){var e=fpcm.dom.fromId("fpcm-id-search-global-text").val();if(!e||e.length<3)return!1;fpcm.gsearch.results(e)})},results:function(e){fpcm.ui.replaceIcon("fpcm-id-search-global-start","magnifying-glass-arrow-right","circle-notch fa-spin-pulse"),fpcm.ajax.post("searchall",{quiet:!0,data:{term:e},execDone:function(e){fpcm.dom.fromClass("fpcm.ui-search-global-results").remove();let n="",s="dropdown-item-text fpcm ui-search-global-results text-truncate";if(e.count<1||!e.items){let e=fpcm.ui.getIcon("list-ul",{stack:"ban fpcm-ui-important-text",stackTop:!0})+" "+fpcm.ui.translate("GLOBAL_NOTFOUND2");n+=`<div class="${s}"><div class="alert alert-secondary mb-0" role="alert">${e}</div></div>`}else{if(e.count>e.items.length){let t=fpcm.ui.translate("LABEL_SEARCH_GLOBAL_RESULTSIZE").replace("{{result_count}}",e.count);n+=`<div class="${s}"><div class="alert alert-warning" role="alert">${t}</div></div>`}for(var t=0;t<e.items.length;t++){if(!e.items[t])continue;let o=e.items[t].link,a=e.items[t].text,r=e.items[t].icon,c=e.items[t].lightbox?"fpcm ui-link-fancybox":"",i="";e.items[t].lightbox&&(_img=new Image,_img.src=o,i=`data-pswp-width="${_img.naturalWidth}" data-pswp-height="${_img.naturalHeight}"`),n+=`<div class="${s}"><a href="${o}" target="_blank" class="text-truncate ${c}" ${i}>${r}${a}</a></div>`}}fpcm.dom.appendHtml("#fpcm-id-search-global",`<div class="fpcm ui-search-global-results"><hr class="dropdown-divider"></div>${n}`),e.lightbox&&fpcm.ui.initLightbox(),fpcm.ui.replaceIcon("fpcm-id-search-global-start","circle-notch fa-spin-pulse","magnifying-glass-arrow-right")}})}}