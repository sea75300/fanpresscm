if(fpcm===void 0)var fpcm={};fpcm.pkgManager={startTime:0,stopTime:0,elCount:[],elements:[],currentEl:{},currentIdx:0,progressBarId:"package",progressBarLabelId:"progress-bar-label",timerDivId:"fpcm-id-update-timer",messagesDivId:"fpcm-id-package-messages",init:function(){if(fpcm.pkgManager.initBefore&&fpcm.pkgManager.initBefore())return!1;fpcm.pkgManager.execRequest(fpcm.vars.jsvars.pkgdata.steps[0])},execRequest:function(e){if(!fpcm.pkgManager.execModulerequest)return fpcm.pkgManager.showMessage("danger","Package manager request executable not found!"),!1;fpcm.pkgManager.currentIdx++,fpcm.pkgManager.currentEl=e,fpcm.pkgManager.beforeExecRequest&&fpcm.pkgManager.beforeExecRequest();var t={step:e.step,func:e.func,var:e.var};let n=fpcm.ui.progressbar(fpcm.pkgManager.progressBarId,{value:fpcm.pkgManager.currentIdx,max:fpcm.vars.jsvars.stepcount,min:1,label:e.icon+e.label,hasHtmlLabel:fpcm.pkgManager.progressBarLabelId});return t.func&&typeof fpcm.pkgManager[t.func]=="function"&&fpcm.pkgManager[t.func].call(),!!t.step&&(fpcm.pkgManager.execModulerequest(),!0)},startTimer:function(){fpcm.pkgManager.startTime=(new Date).getTime()},stopTimer:function(){if(fpcm.pkgManager.assignTimerStopTime("success"),!fpcm.pkgManager.stopTimerMessage)return!1;fpcm.pkgManager.stopTimerMessage()},errorMsg:function(){let e=new fpcm.ui.forms.icon("times","lg");return fpcm.pkgManager.assignTimerStopTime("danger"),fpcm.pkgManager.showMessage("danger",'<span class="me-2">'+e.getString()+"</span>"+fpcm.pkgManager.currentEl.label.trim(),fpcm.ui.translate("PACKAGEMANAGER_FAILED")),document.getElementById("protobtn").classList.replace("btn-light","btn-primary"),fpcm.ui.translate("PACKAGEMANAGER_FAILED")+" "+fpcm.pkgManager.currentEl.label.trim()},assignTimerStopTime:function(e){fpcm.pkgManager.stopTime=(new Date).getTime();let t=document.getElementById(fpcm.pkgManager.timerDivId);t.innerText=(fpcm.pkgManager.stopTime-fpcm.pkgManager.startTime)/1e3+" sec",t.parentElement.classList.replace("list-group-item-light",`list-group-item-${e}`)},showMessage:function(e,t,n){let s=document.createElement("div");s.classList.add("alert","alert-"+e,"shadow-sm"),s.setAttribute("role","alert");let o=document.createElement("h4");o.innerHTML=t,o.classList.add("alert-heading","mb-3","text-break"),s.appendChild(o),s.appendChild(document.createElement("hr"));let i=document.createElement("p");i.innerHTML=n,i.classList.add("my-0","text-break"),s.appendChild(i),document.getElementById(fpcm.pkgManager.messagesDivId).appendChild(s)}}