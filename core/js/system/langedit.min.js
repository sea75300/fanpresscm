if(fpcm===void 0)var fpcm={};fpcm.langedit={init:function(){if(!fpcm.vars.jsvars.langfile)return!1;let t=document.getElementById("fpcm-id-langedit-list"),n=t.childNodes.item(1);for(var e in fpcm.vars.jsvars.langfile){let t=document.createElement("div");t.classList.add("row","py-2","border-bottom","border-1","border-secondary"),t.setAttribute("data-var",e);let s=document.createElement("button");s.dataset.varname=e,s.classList.add("btn","btn-light","me-1"),s.innerHTML=new fpcm.ui.forms.icon("edit").getString(),s.setAttribute("title",fpcm.ui.translate("GLOBAL_EDIT")),s.addEventListener("click",function(e){e.preventDefault();let n=e.currentTarget.dataset.varname,t=fpcm.langedit.dialogForm(n,fpcm.vars.jsvars.langfile[n]);fpcm.ui_dialogs.create({id:"langform-"+n.toLowerCase(),title:"Edit language var: "+n,content:t,closeButton:!0,dlButtons:[{text:"GLOBAL_SAVE",icon:"check",clickClose:!0,click:function(){let e=document.getElementById(fpcm.ui.prepareId(t[0].id,!0)).value,n=document.getElementById(fpcm.ui.prepareId(t[1].id,!0)).value;e=e.toUpperCase(),t[0].value!==e&&delete fpcm.vars.jsvars.langfile[t[0].value],fpcm.vars.jsvars.langfile[e]=n,fpcm.langedit.executeSave()}}]})});let o=document.createElement("button");o.dataset.varname=e,o.classList.add("btn","btn-light"),o.innerHTML=new fpcm.ui.forms.icon("trash").getString(),o.setAttribute("title",fpcm.ui.translate("GLOBAL_DELETE")),o.addEventListener("click",function(e){e.preventDefault(),delete fpcm.vars.jsvars.langfile[e.currentTarget.dataset.varname],e.currentTarget.parentElement.parentElement.remove(),fpcm.langedit.executeSave()});let i=document.createElement("div");i.classList.add("col-auto","align-self-center"),i.appendChild(s),i.appendChild(o),t.appendChild(i);let r=document.createElement("div");r.classList.add("col-4","align-self-center","flex-grow-0","text-truncate"),r.innerText=e,t.appendChild(r);let c=document.createElement("div");c.classList.add("col-4","align-self-center","flex-grow-1","text-wrap");let a=fpcm.vars.jsvars.langfile[e];a instanceof Object&&(a=JSON.stringify(a)),c.innerText=a.replace(/(?:\r\n|\r|\n)/g,"<br>"),t.appendChild(c),n.appendChild(t)}},initAfter:function(){fpcm.dom.bindClick("#btnNew",function(){let e=fpcm.langedit.dialogForm("","");fpcm.ui_dialogs.create({id:"langform-new",title:"New language variable ",content:e,closeButton:!0,dlButtons:[{text:"GLOBAL_SAVE",icon:"save",primary:!0,clickClose:!0,click:function(){let t=document.getElementById(fpcm.ui.prepareId(e[0].id,!0)).value,n=document.getElementById(fpcm.ui.prepareId(e[1].id,!0)).value;if(!t||!n)return fpcm.ui.addMessage({txt:`Variable name or value must not be empty!`,type:"error"}),!1;if(t=t.toUpperCase(),fpcm.vars.jsvars.langfile[t])return fpcm.ui.addMessage({txt:`Variable "${t}" already exists with value "${fpcm.vars.jsvars.langfile[t]}".`,type:"error"}),!1;fpcm.vars.jsvars.langfile[t]=n,fpcm.langedit.executeSave()}}]})}),fpcm.dom.bindClick("#btnSave",function(){return document.getElementsByName("lang").length||fpcm.langedit.executeSave(!0),!0},!1,!0)},executeSave:function(e){let t=document.createElement("textarea");if(t.classList.add("d-none"),t.name="lang",t.value=JSON.stringify(fpcm.vars.jsvars.langfile),document.getElementById("fpcm-ui-form").append(t),e)return!0;fpcm.dom.fromId("btnSave").trigger("click")},dialogForm:function(e,t){t instanceof Object&&(t=JSON.stringify(t));let n=new fpcm.ui.forms.input;n.type="text",n.id="input-var",n.label="Variable name",n.placeholder=n.label,n.value=e;let s=new fpcm.ui.forms.textarea;return s.id="input-value",s.label="Variable value",s.placeholder=s.label,s.value=t,[n,s]}}